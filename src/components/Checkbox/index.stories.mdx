import { useState } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import { Checkbox } from './index';
import { pickPropsInObj, eventHandler } from '../../storybook-props/';
import { spacing, generateTable } from '../../storybook-props';
import { runTest } from './storybookTest.ts';

<Meta
  title="Components/Checkbox"
  component={Checkbox}
  argTypes={{
    ...spacing('margin'),
    ...pickPropsInObj(eventHandler, 'onChange'),
    boldLabel: {
      ...generateTable({ defaultValue: false }),
    },
    checked: {
      ...generateTable({ required: true, type: 'boolean | "checked" | "unchecked" | "intermediate"' }),
      options: [true, false, 'checked', 'unchecked', 'intermediate'],
      control: 'select',
    },
    disabled: {
      ...generateTable({ defaultValue: false }),
    },
  }}
/>

export const Template = (args) => {
  const [checked, setChecked] = useState(false);
  const toggle = (e) => {
    setChecked(e.target.checked);
  };
  return <Checkbox checked={checked} {...args} onChange={toggle} />;
};

# Checkbox

<Canvas>
  <Story name="default" args={{ label: '체크박스', name: '기본' }}>
    {runTest(Template.bind({}))}
  </Story>
</Canvas>

<ArgsTable story="default" />

## 상태

체크박스의 상태는 4가지가 있습니다.

- false (unchecked)
- true (checked)
- intermediate: 체크여부를 `boolean`으로 측정할 수 없을 때 사용합니다.
- disabled

<Canvas>
  <Story name="상태">
    {(args) => {
      const [checked, setChecked] = useState([false, true, 'intermediate', 'unchecked', 'checked', 'intermediate']);
      const toggle = (idx, isChecked) => {
        const newResult = [...checked];
        newResult[idx] = isChecked;
        setChecked(newResult);
      };
      return (
        <>
          <Checkbox
            label="체크안됨"
            checked={checked[0]}
            mb={2}
            name="01"
            onChange={(e) => toggle(0, e.target.checked)}
          />
          <Checkbox label="체크" checked={checked[1]} mb={2} name="02" onChange={(e) => toggle(1, e.target.checked)} />
          <Checkbox
            label="중간값"
            checked={checked[2]}
            mb={2}
            name="03"
            onChange={(e) => toggle(2, e.target.checked)}
          />
          <Checkbox
            label="unchecked and disabled"
            checked={checked[3]}
            disabled
            mb={2}
            name="04"
            onChange={(e) => toggle(3, e.target.checked)}
          />
          <Checkbox
            label="checked and disabled"
            checked={checked[4]}
            disabled
            mb={2}
            name="05"
            onChange={(e) => toggle(4, e.target.checked)}
          />
          <Checkbox
            label="intermediate and disabled"
            checked={checked[5]}
            disabled
            name="06"
            onChange={(e) => toggle(5, e.target.checked)}
          />
        </>
      );
    }}
  </Story>
</Canvas>
